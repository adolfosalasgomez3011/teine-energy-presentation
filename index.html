<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teine Energy - Reveal.js Presentation</title>
    
    <!-- Reveal.js CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/theme/black.min.css">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* ===== HATCH CORPORATE DESIGN SYSTEM ===== */
        :root {
            --hatch-orange: #E84B37;
            --hatch-orange-alt: #E75300;
            --hatch-medium-gray: #595959;
            --hatch-light-gray: #A0AEC0;
            --hatch-white: #FFFFFF;
            --hatch-dark-gray: #2D3748;
            --header-height: 60px;
            --footer-height: 40px;
        }

        /* ===== MASTER LAYOUT ===== */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .master-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            min-height: 100vh;
            position: relative;
        }

        /* ===== HATCH HEADER ===== */
        .master-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, var(--hatch-orange) 0%, var(--hatch-orange-alt) 100%);
            color: white;
            padding: 0 20px;
            height: var(--header-height);
            z-index: 2000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .master-header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .master-header-logo {
            height: 40px;
            width: auto;
        }

        .master-header-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin: 0;
            letter-spacing: 1px;
        }

        .master-header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .presentation-mode-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .presentation-mode-btn:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
        }

        .slide-counter {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* ===== PRESENTATION CONTAINER ===== */
        .presentation-container {
            flex: 1;
            position: relative;
            background: #000000;
            margin-bottom: var(--footer-height);
            min-height: calc(100vh - var(--header-height) - var(--footer-height));
        }

        /* ===== PRESENTATION MODE STYLES ===== */
        .presentation-mode .hatch-footer-white {
            display: none !important; /* Hide footer in presentation mode */
        }

        .presentation-mode .presentation-container {
            margin-bottom: 0;
            min-height: calc(100vh - var(--header-height));
        }

        /* ===== REVEAL.JS OVERRIDES ===== */
        .reveal {
            background: #000000 !important;
        }
        
        .reveal .slides {
            text-align: left !important;
            width: 100% !important;
            height: 100% !important;
        }
        
        .reveal .slides section {
            width: 100% !important;
            height: 100% !important;
            margin: 0 !important;
            padding: 0 !important;
            top: 0 !important;
            left: 0 !important;
        }
        
        .reveal .progress {
            color: var(--hatch-orange) !important;
            z-index: 1000 !important;
        }
        
        .reveal .controls {
            color: var(--hatch-orange) !important;
            z-index: 1000 !important;
            bottom: 60px !important; /* Move controls above footer */
        }
        
        .reveal .slide-number {
            color: var(--hatch-orange) !important;
            z-index: 1000 !important;
            bottom: 60px !important; /* Move slide number above footer */
        }

        /* ===== IFRAME RESPONSIVE STYLES ===== */
        .slide-iframe {
            width: 100vw;
            height: 100%;
            border: none;
            margin: 0;
            padding: 0;
            position: absolute;
            top: 0;
            left: 0;
            background: transparent;
        }

        .presentation-mode .slide-iframe {
            height: 100%; /* Fill the container */
        }

        /* ===== SIMPLE WHITE FOOTER ===== */
        .hatch-footer-white {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            width: 100%;
            height: 40px;
            background: #ffffff;
            border-top: 2px solid #E84B37;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 30px;
            z-index: 999999;
            font-family: 'Segoe UI', sans-serif;
            font-size: 11px;
            color: #595959;
            box-sizing: border-box;
        }

        /* Override any inherited styles */
        .master-footer * {
            background: transparent !important;
            color: #595959 !important;
        }

        .footer-left {
            display: flex;
            align-items: center;
        }

        .footer-logo {
            height: 24px;
            width: auto;
        }

        .footer-text {
            font-size: 11px;
            color: #595959;
        }

        .footer-right {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-right: 5px;
        }

        .page-number {
            font-size: 11px;
            color: #595959;
            font-weight: 500;
        }
        
        /* ===== FORCE FOOTER VISIBILITY ===== */
        .master-footer {
            transform: translateZ(0) !important;
            will-change: transform !important;
        }

        /* Ensure Reveal.js doesn't override footer */
        .reveal-viewport {
            padding-bottom: var(--footer-height) !important;
        }

        /* Force footer above all Reveal.js elements */
        .master-footer * {
            color: white !important;
        }

        /* Ensure proper scaling on different devices */
        @media (max-width: 1024px) {
            .slide-iframe {
                transform: scale(0.9);
                transform-origin: top left;
                width: 111%;
                height: 111%;
            }

            .presentation-mode .slide-iframe {
                height: 111%;
            }
        }
        
        @media (max-width: 768px) {
            .slide-iframe {
                transform: scale(0.75);
                transform-origin: top left;
                width: 133%;
                height: 133%;
            }

            .presentation-mode .slide-iframe {
                height: 133%;
            }

            .master-header-title {
                font-size: 1rem;
            }

            .footer-text, .page-number {
                font-size: 10px;
            }

            .footer-logo {
                height: 20px;
            }

            .presentation-mode-btn {
                padding: 6px 12px;
                font-size: 0.8rem;
            }
        }
        
        @media (max-width: 480px) {
            .slide-iframe {
                transform: scale(0.6);
                transform-origin: top left;
                width: 167%;
                height: 167%;
            }

            .presentation-mode .slide-iframe {
                height: 167%;
            }

            .master-header {
                padding: 0 10px;
            }

            .master-header-title {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="master-container">
        <!-- Hatch Header -->
        <header class="master-header">
            <div class="master-header-left">
                <img src="https://jphbhfjceftswsnahwgc.supabase.co/storage/v1/object/public/presentation-assets/hatch_-_logo.png" 
                     alt="Hatch Logo" class="master-header-logo">
                <h1 class="master-header-title">HATCH ADVISORY</h1>
            </div>
            <div class="master-header-right">
                <span class="slide-counter">
                    <span id="current-slide">1</span> / <span id="total-slides">11</span>
                </span>
                <button class="presentation-mode-btn" id="presentation-mode-btn">
                    <i class="fas fa-expand"></i>
                    <span>Presentation Mode</span>
                </button>
            </div>
        </header>

        <!-- Presentation Container -->
        <div class="presentation-container">
            <div class="reveal">
                <div class="slides">
            <!-- Cover Slide -->
            <section data-background="#000000">
                <iframe src="slides/01_cover_slide.html" class="slide-iframe" scrolling="no" title="Cover Slide"></iframe>
            </section>
            
            <!-- Manifesto -->
            <section data-background="#000000">
                <iframe src="slides/02_manifesto.html" class="slide-iframe" scrolling="no" title="Manifesto Slide"></iframe>
            </section>
            
            <!-- Summary -->
            <section data-background="#000000">
                <iframe src="slides/03_summary.html" class="slide-iframe" scrolling="no" title="Summary Slide"></iframe>
            </section>
            
            <!-- Asset Footprint -->
            <section data-background="#000000">
                <iframe src="slides/04_asset_footprint.html" class="slide-iframe" scrolling="no" title="Asset Footprint Slide"></iframe>
            </section>
            
            <!-- Financial -->
            <section data-background="#000000">
                <iframe src="slides/05_financial.html" class="slide-iframe" scrolling="no" title="Financial Slide"></iframe>
            </section>
            
            <!-- Organization Chart -->
            <section data-background="#000000">
                <iframe src="slides/06_org_chart.html" class="slide-iframe" scrolling="no" title="Organization Chart Slide"></iframe>
            </section>
            
            <!-- Strategic Focus -->
            <section data-background="#000000">
                <iframe src="slides/07_strategic_focus.html" class="slide-iframe" scrolling="no" title="Strategic Focus Slide"></iframe>
            </section>
            
            <!-- Investment Focus -->
            <section data-background="#000000">
                <iframe src="slides/08_investment_focus.html" class="slide-iframe" scrolling="no" title="Investment Focus Slide"></iframe>
            </section>
            
            <!-- Market News -->
            <section data-background="#000000">
                <iframe src="slides/09_market_news.html" class="slide-iframe" scrolling="no" title="Market News Slide"></iframe>
            </section>
            
            <!-- Areas of Opportunity -->
            <section data-background="#000000">
                <iframe src="slides/10_areas_opportunity.html" class="slide-iframe" scrolling="no" title="Areas of Opportunity Slide"></iframe>
            </section>
            
            <!-- Thank You -->
            <section data-background="#000000">
                <iframe src="slides/11_thank_you.html" class="slide-iframe" scrolling="no" title="Thank You Slide"></iframe>
            </section>
                </div>
            </div>
        </div>
    </div>

    <!-- Hatch Footer - MOVED OUTSIDE ALL CONTAINERS -->
    <footer class="hatch-footer-white">
        <div class="footer-left">
            <span class="footer-text" id="copyright-text">Copyright © Hatch 2025. All Rights Reserved.</span>
        </div>
        <div class="footer-right">
            <span class="page-number" id="footer-page-number">3</span>
            <img src="https://jphbhfjceftswsnahwgc.supabase.co/storage/v1/object/public/presentation-assets/hatch_-_logo.png" 
                 alt="Hatch Logo" class="footer-logo">
        </div>
    </footer>

    <!-- Reveal.js JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/reveal.min.js"></script>
    
    <script>
        // Initialize Reveal.js with responsive settings
        Reveal.initialize({
            hash: true,
            controls: true,
            progress: true,
            center: false,
            transition: 'slide',
            transitionSpeed: 'default',
            backgroundTransition: 'fade',
            
            // Full viewport usage
            width: "100%",
            height: "100%",
            margin: 0,
            minScale: 1,
            maxScale: 1,
            
            // Navigation
            keyboard: true,
            touch: true,
            loop: false,
            
            // UI
            slideNumber: 'c/t',
            showSlideNumber: 'all',
            
            // Disable auto-animations that might interfere
            autoAnimateEasing: 'ease',
            autoAnimateDuration: 0.4,
            autoAnimateUnmatched: false
        });

        // Position navigation controls above footer after Reveal.js is ready
        Reveal.on('ready', function() {
            const controls = document.querySelector('.reveal .controls');
            const progress = document.querySelector('.reveal .progress');
            const slideNumber = document.querySelector('.reveal .slide-number');
            
            if (controls) controls.style.bottom = '60px';
            if (progress) progress.style.bottom = '45px';
            if (slideNumber) slideNumber.style.bottom = '60px';
        });

        // Presentation Mode Toggle
        let presentationMode = false;
        const presentationBtn = document.getElementById('presentation-mode-btn');
        const masterContainer = document.querySelector('.master-container');
        
        presentationBtn.addEventListener('click', function() {
            presentationMode = !presentationMode;
            
            if (presentationMode) {
                // Enter presentation mode
                masterContainer.classList.add('presentation-mode');
                presentationBtn.innerHTML = '<i class="fas fa-compress"></i><span>Exit Presentation</span>';
                
                // Reset navigation controls to default positions
                const controls = document.querySelector('.reveal .controls');
                const progress = document.querySelector('.reveal .progress');
                const slideNumber = document.querySelector('.reveal .slide-number');
                
                if (controls) controls.style.bottom = '12px';
                if (progress) progress.style.bottom = '0px';
                if (slideNumber) slideNumber.style.bottom = '12px';
                
                // Try to enter fullscreen
                if (document.documentElement.requestFullscreen) {
                    document.documentElement.requestFullscreen();
                } else if (document.documentElement.webkitRequestFullscreen) {
                    document.documentElement.webkitRequestFullscreen();
                } else if (document.documentElement.msRequestFullscreen) {
                    document.documentElement.msRequestFullscreen();
                }
            } else {
                // Exit presentation mode
                masterContainer.classList.remove('presentation-mode');
                presentationBtn.innerHTML = '<i class="fas fa-expand"></i><span>Presentation Mode</span>';
                
                // Move navigation controls above footer
                const controls = document.querySelector('.reveal .controls');
                const progress = document.querySelector('.reveal .progress');
                const slideNumber = document.querySelector('.reveal .slide-number');
                
                if (controls) controls.style.bottom = '60px';
                if (progress) progress.style.bottom = '45px';
                if (slideNumber) slideNumber.style.bottom = '60px';
                
                // Exit fullscreen
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
            
            // Trigger iframe optimization after mode change
            setTimeout(optimizeIframes, 100);
        });

        // Handle fullscreen change events
        document.addEventListener('fullscreenchange', handleFullscreenChange);
        document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
        document.addEventListener('msfullscreenchange', handleFullscreenChange);

        function handleFullscreenChange() {
            const isFullscreen = !!(document.fullscreenElement || document.webkitFullscreenElement || document.msFullscreenElement);
            
            if (!isFullscreen && presentationMode) {
                // User exited fullscreen manually, update our state
                presentationMode = false;
                masterContainer.classList.remove('presentation-mode');
                presentationBtn.innerHTML = '<i class="fas fa-expand"></i><span>Presentation Mode</span>';
                
                // Move navigation controls above footer
                const controls = document.querySelector('.reveal .controls');
                const progress = document.querySelector('.reveal .progress');
                const slideNumber = document.querySelector('.reveal .slide-number');
                
                if (controls) controls.style.bottom = '60px';
                if (progress) progress.style.bottom = '45px';
                if (slideNumber) slideNumber.style.bottom = '60px';
                
                setTimeout(optimizeIframes, 100);
            }
        }

        // Update slide counter and footer page number
        function updateSlideCounter() {
            const currentSlideNum = Reveal.getIndices().h + 1;
            document.getElementById('current-slide').textContent = currentSlideNum;
            document.getElementById('footer-page-number').textContent = currentSlideNum;
        }

        // Enhanced responsive iframe management
        function optimizeIframes() {
            const iframes = document.querySelectorAll('.slide-iframe');
            const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
            
            iframes.forEach(iframe => {
                // Ensure iframe is loaded and responsive
                iframe.onload = function() {
                    // Apply responsive scaling based on viewport
                    if (vw < 480) {
                        // Mobile phones
                        iframe.style.transform = 'scale(0.6)';
                        iframe.style.width = '167%';
                        iframe.style.height = '167%';
                    } else if (vw < 768) {
                        // Tablets
                        iframe.style.transform = 'scale(0.75)';
                        iframe.style.width = '133%';
                        iframe.style.height = '133%';
                    } else if (vw < 1024) {
                        // Small laptops
                        iframe.style.transform = 'scale(0.9)';
                        iframe.style.width = '111%';
                        iframe.style.height = '111%';
                    } else {
                        // Desktop and large screens
                        iframe.style.transform = 'scale(1)';
                        iframe.style.width = '100vw';
                        iframe.style.height = '100%';
                    }
                };
                
                // Trigger load event if already loaded
                if (iframe.complete) {
                    iframe.onload();
                }
            });
        }
        
        // Apply optimizations
        document.addEventListener('DOMContentLoaded', function() {
            // Update copyright year to current year
            const currentYear = new Date().getFullYear();
            document.getElementById('copyright-text').textContent = `Copyright © Hatch ${currentYear}. All Rights Reserved.`;
            
            // Force footer white background with JavaScript
            const footer = document.querySelector('.hatch-footer-white');
            if (footer) {
                footer.style.background = 'white';
                footer.style.backgroundColor = 'white';
                footer.style.backgroundImage = 'none';
            }
            
            optimizeIframes();
            updateSlideCounter();
        });
        window.addEventListener('resize', optimizeIframes);
        window.addEventListener('orientationchange', optimizeIframes);
        
        // Reoptimize on slide changes and update counter
        Reveal.on('slidechanged', function(event) {
            setTimeout(optimizeIframes, 100);
            updateSlideCounter();
        });
        
        // Preload next and previous slides for smoother transitions
        Reveal.on('slidechanged', function(event) {
            const currentSlide = event.indexh;
            const totalSlides = Reveal.getTotalSlides();
            
            // Preload adjacent slides
            if (currentSlide > 0) {
                const prevIframe = document.querySelector(`section:nth-child(${currentSlide}) .slide-iframe`);
                if (prevIframe && !prevIframe.src) {
                    prevIframe.src = prevIframe.getAttribute('data-src');
                }
            }
            
            if (currentSlide < totalSlides - 1) {
                const nextIframe = document.querySelector(`section:nth-child(${currentSlide + 2}) .slide-iframe`);
                if (nextIframe && !nextIframe.src) {
                    nextIframe.src = nextIframe.getAttribute('data-src');
                }
            }
        });


    </script>
</body>
</html>
